<!doctype html>
<html lang="{{ page.lang | default: site.lang | default: 'ko' }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      {% if page.url == '/' and page.title %}
        {{ page.title }}
      {% elsif page.title %}
        {{ page.title }} | {{ site.title }}
      {% else %}
        {{ site.title }}
      {% endif %}
    </title>
    <link rel="icon" type="image/svg+xml" href="{{ '/assets/icons/kms-favicon.svg' | relative_url }}">
    <link rel="shortcut icon" href="{{ '/assets/icons/kms-favicon.svg' | relative_url }}">
    <link rel="apple-touch-icon" href="{{ '/assets/icons/kms-favicon.svg' | relative_url }}">
    <link rel="manifest" href="{{ '/assets/site.webmanifest' | relative_url }}">
    <meta name="theme-color" content="#4062BB">
    <meta name="msapplication-TileColor" content="#4062BB">
    <link rel="stylesheet" href="{{ '/assets/site.css' | relative_url }}">
    <link rel="alternate" type="application/atom+xml" title="{{ site.title }}" href="{{ '/feed.xml' | relative_url }}">
    <script defer src="{{ '/assets/site.js' | relative_url }}"></script>
  </head>
  <body data-baseurl="{{ site.baseurl | default: '' }}">
    <div class="site-shell">
      <aside class="sidebar">
        <a class="brand" href="{{ '/' | relative_url }}" aria-label="홈으로 이동">
          <span class="brand-mark">BE</span>
          <span class="brand-text">
            <strong>석이's Blog</strong>
            <small>Engineering Notes</small>
          </span>
        </a>

        <section class="search-block">
          <label class="search-label" for="site-search-input">Search</label>
          <input
            id="site-search-input"
            class="search-input"
            type="search"
            placeholder="제목/본문 검색..."
            autocomplete="off"
            spellcheck="false"
          >
          <div id="site-search-results" class="search-results" hidden></div>
        </section>

        <nav class="sidebar-nav">
          <a class="sidebar-link {% if page.url == '/' %}is-active{% endif %}" href="{{ '/' | relative_url }}">
            <span>Home</span>
            <span class="count">·</span>
          </a>
          {% for item in site.data.sidebar.items %}
            {% assign current_count = site.categories[item.key] | size %}
            <a class="sidebar-link {% if page.category_key == item.key %}is-active{% endif %}" href="{{ item.path | relative_url }}">
              <span>{{ item.label }}</span>
              <span class="count">{{ current_count }}</span>
            </a>
          {% endfor %}
          <a class="sidebar-link {% if page.url == '/about/' %}is-active{% endif %}" href="{{ '/about/' | relative_url }}">
            <span>About</span>
            <span class="count">·</span>
          </a>
        </nav>

        <div class="sidebar-note">
          <p>{{ site.posts.first.date | date: "%Y-%m-%d %H:%M" }} 발행</p>
          <small>AI 뉴스 + 개발 학습 글</small>
        </div>
      </aside>

      <main class="main-content">
        {{ content }}
      </main>
    </div>
  </body>
</html>
