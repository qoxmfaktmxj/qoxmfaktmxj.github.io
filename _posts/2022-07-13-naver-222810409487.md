---
layout: post
title: "전체 테이블 복사 Procedure"
date: 2022-07-13 23:43:23 +0900
categories: [java, naver-archive]
tags: [naver-import]
naver_source: https://blog.naver.com/qoxmfaktmxj/222810409487
---

> 원문: [https://blog.naver.com/qoxmfaktmxj/222810409487](https://blog.naver.com/qoxmfaktmxj/222810409487)

**CREATE OR REPLACE PROCEDURE SYS.프로시저명** 

**IS**

 **v\_script VARCHAR2(2000\);**

 **CURSOR V\_T\_NAME IS**

 **select**

 **replace(dbms\_metadata.get\_ddl('TABLE','A계정의테이블명','A계정'),'"A계정명".','"B계정명".')script**

 **from all\_users**

 **WHERE USERNAME\='A계정명'**

 **;**

****

**BEGIN**

 **FOR TN IN V\_T\_NAME LOOP**

 **BEGIN**

 **v\_script :\= TN.script;**

 **EXECUTE IMMEDIATE v\_script;**

 **EXCEPTION**

 **WHEN OTHERS THEN**

 **DBMS\_OUTPUT.PUT\_LINE(' QUERY '\|\| v\_script);**

 **DBMS\_OUTPUT.PUT\_LINE(' error '\|\| TN.script\|\|' : '\|\|sqlerrm);**

 **END;**

 **END LOOP;**

**end;**

****

**특정 계정 전체 테이블 복사 \-\> sys계정 권한 필요**
